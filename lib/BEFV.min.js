(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.d({},{N:()=>Y});const i=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),n(this,"events",void 0),this.events=r}var i,o;return i=e,(o=[{key:"addListener",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.events[e]=r?[].concat(r):[]}},{key:"emit",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return this.events&&(null===(t=this.events[e])||void 0===t?void 0:t.length)&&this.events[e].forEach((function(e){n.length?n.forEach((function(t){e(t)})):e(void 0)}))}}])&&r(i.prototype,o),e}();function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"throw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BEFormValidator";return Y.__utils.errorConstructor(t)(e)}}],null&&o(t.prototype,null),r&&o(t,r),e}(),s=Object.create({});function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}s.VERSION="1.4.2",s.PACKAGE_NAME_IN_FORM="__BEFV",s.VALIDATOR_TYPES={phone:"phone",email:"email",required:"required",length:"length"},s.DEFAUTL_VALUES={VALIDATOR:{element:void 0,options:{default:!1},subscriptions:{},handlers:{}},VALIDATION_ELEMENT:{onlyOnSubmit:!1,subscriptions:{valid:function(){},invalid:function(){}},handlers:{input:function(){}}},VALIDATOR_ELEMENT_HANDLER:{handler:void 0,useValidate:!0,useSubscribeOnInput:!0}},s.DATASET={VALID:"data-be-valid"},s.ERROR_MESSAGE_CLASS_NAME="be-error-message",s.SUCCESS_MESSAGE_CLASS_NAME="be-success-message";var f=function(){function e(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{success:!1};if(u(this,e),c(this,"text",void 0),c(this,"input",void 0),c(this,"opt",void 0),c(this,"messageHTML",void 0),c(this,"changeStatus",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.text;n.remove();var r=e?s.SUCCESS_MESSAGE_CLASS_NAME:s.ERROR_MESSAGE_CLASS_NAME;n.opt.noSpan||(n.messageHTML.className="",n.messageHTML.classList.add(r),n.messageHTML.innerText=t||""),n.opt.hasOwnProperty("border")&&n.opt.border&&n.input.classList.add(r+"-input"),n.append()})),this.text=t,this.input=r,this.opt=i,!this.text.length)throw a.throw("{ text } for error is empty","InputMessage");if(!this.input)throw a.throw("{ input } is undefined","InputMessage");this.messageHTML=e.createWrapper(this.text,i.success)}var t,r,n;return t=e,n=[{key:"createWrapper",value:function(e,t){var r=document.createElement("be-error");return r.classList.add(t?s.SUCCESS_MESSAGE_CLASS_NAME:s.ERROR_MESSAGE_CLASS_NAME),r.textContent=e,r}}],(r=[{key:"append",value:function(){if(!this.opt.noSpan)if(this.opt.noAdjacent){if(!this.opt.location)throw a.throw("{ messages.location } is undefined","InputMessage");this.opt.location.appendChild(this.messageHTML)}else this.input.insertAdjacentElement("afterend",this.messageHTML)}},{key:"remove",value:function(){this.opt.hasOwnProperty("border")&&this.opt.border&&(this.input.classList.remove(s.ERROR_MESSAGE_CLASS_NAME+"-input"),this.input.classList.remove(s.SUCCESS_MESSAGE_CLASS_NAME+"-input")),this.messageHTML.remove()}}])&&l(t.prototype,r),n&&l(t,n),e}();function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"opt",void 0),p(this,"validator",void 0),p(this,"isValid",!1),p(this,"isInit",!1),p(this,"messages",void 0),p(this,"element",void 0),p(this,"createHandlerFunc",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DEFAUTL_VALUES.VALIDATOR_ELEMENT_HANDLER;return function(t){e.handler&&e.handler(t),e.useValidate&&n.validate(),e.useSubscribeOnInput&&n.validator.form.subscribeOnInput&&n.validator.emit("BEForm::checkInputValidation")}})),this.opt=t,this.validator=r;var i=v({},s.DEFAUTL_VALUES.VALIDATION_ELEMENT);if(this.opt=Object.assign(i,this.opt),this.element=this.opt.element,"string"==typeof this.element){var o=document.querySelector(this.element);this.element=o||void 0}}var t,r,n;return t=e,n=[{key:"Error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return e+t}));return a.throw(n,"ValidateElement")}}],(r=[{key:"validate",value:function(){var t,r=this;this.isValid=!1;var n,i=!1,o=!1,a=null===(t=this.element)||void 0===t?void 0:t.value,s="checkbox"===this.element.type,u=this.opt.rules,l=this.opt.message,c=!l.required&&!l.rule&&l.border,d={location:l.location||void 0,noAdjacent:l.noAdjacent||void 0,border:l.border||!1,noSpan:c};if("checked"in this.element&&(n=this.element.checked),this.messages||(this.messages=new f(" ",this.element,d)),u.hasOwnProperty("required")&&u.required){var m=s?!!n:!!a,p=m?"success":"error";if(this.messages.changeStatus(m,l&&l.required?(null==l?void 0:l.required.hasOwnProperty(p))&&l.required[p]:""),!m)return void this.opt.subscriptions.invalid()}var b={messagePreventDefault:function(){o=!0}};if(u.hasOwnProperty("rule")&&void 0!==u.rule){var y,g,E=u.rule;if(i=function t(n){if(null===n)return!0;switch(n.constructor){case RegExp:return n.test(a.toString());case Function:return n.call(v(v({},r),b),r.element,r.validator);case Array:var i=E,o=!1;if(i.length){var s,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(i);try{for(u.s();!(s=u.n()).done;){var l=t(s.value);if(o=l,!l)break}}catch(e){u.e(e)}finally{u.f()}}else console.error(e.Error("rule of array [] is empty.",r.element.className));return o;default:throw e.Error("rules: { rule: ... } for this input is not valid. Please use valid RegExp like => /(.*)/g without quotes and dbl quotes or use function \n Element =>",r.element.className)}}(E),o||this.messages.changeStatus(i,i?i&&(null==l||null===(g=l.rule)||void 0===g?void 0:g.success)||"":(null==l||null===(y=l.rule)||void 0===y?void 0:y.error)||""),!i)return void this.opt.subscriptions.invalid()}this.opt.subscriptions.valid(this),this.isValid=!0}},{key:"init",value:function(){this.isInit||this.opt.onlyOnSubmit||this.element.addEventListener("input",this.createHandlerFunc({handler:this.opt.handlers.input,useValidate:!0,useSubscribeOnInput:!0})),this.isInit=!0}},{key:"isCorrect",value:function(){return this.element?!!this.opt.hasOwnProperty("rules")||(console.error(e.Error("{ rules } is not defined!")),!1):(console.error(e.Error("{ element => ".concat(this.opt.element," } is nothing to found!"))),!1)}},{key:"destroy",value:function(t){t&&e.Error("object are destroyed for element [index => "+t+"], element is undefined!"),this.isInit&&this.messages&&this.messages.remove&&(this.messages.remove(),this.messages=void 0)}}])&&m(t.prototype,r),n&&m(t,n),e}();function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"__initialInputs",void 0),A(this,"inputs",[]),A(this,"form",s.DEFAUTL_VALUES.VALIDATOR),A(this,"emitter",new i),A(this,"isFormValid",!1),A(this,"__isInit",!1),A(this,"uid",(Date.now().toString()+Math.floor(Math.random()*Date.now())).toString()),this.__initialInputs=r,this.form=t,"string"==typeof this.form.element){var n=document.querySelector(this.form.element);if(!n)throw this.form.element=void 0,b.Error("{ element } is undefined!");this.form.element=n}this.form.element[s.PACKAGE_NAME_IN_FORM]=this,this.form.hasOwnProperty("subscriptions")?("valid"in this.form.subscriptions&&this.form.subscriptions.valid instanceof Function||(this.form.subscriptions.valid=function(){}),"invalid"in this.form.subscriptions&&this.form.subscriptions.invalid instanceof Function||(this.form.subscriptions.invalid=function(){})):this.form.subscriptions={valid:function(){},invalid:function(){}},this.addListener("BEForm::isValidForm",function(){var e,t,r=s.ERROR_MESSAGE_CLASS_NAME+"input";this.isFormValid=!0,this.form.element.setAttribute(s.DATASET.VALID,"1"),null===(e=this.form.element.querySelectorAll("be-error"))||void 0===e||e.forEach((function(e){return e.remove()})),null===(t=this.form.element.querySelectorAll(r))||void 0===t||t.forEach((function(e){e.classList.contains(r)&&(e.classList.remove(r),e.classList.add(s.SUCCESS_MESSAGE_CLASS_NAME+"input"))})),this.form.subscriptions.valid(this)}.bind(this)),this.addListener("BEForm::isInvalidForm",function(){this.isFormValid=!1,this.form.element.setAttribute(s.DATASET.VALID,"0"),this.form.subscriptions.invalid(this)}.bind(this)),this.addListener("BEForm::checkInputValidation",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this.inputs.length){this.isFormValid=!0;var t,r=E(this.inputs);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isInit||n.init(),n.validate(),n.isValid||this.isFormValid&&(this.isFormValid=!1)}}catch(e){r.e(e)}finally{r.f()}}this.emit("BEForm::"+(this.isFormValid?"isValidForm":"isInvalidForm")),e instanceof Function&&e()}.bind(this))}var t,r;return t=e,(r=[{key:"formSubmitHandler",value:function(e){var t,r=this;!1===(null===(t=this.form.options)||void 0===t?void 0:t.default)&&e.preventDefault(),this.emit("BEForm::checkInputValidation",(function(){r.isFormValid?r.form.handlers&&r.form.handlers.hasOwnProperty("submit")&&r.form.handlers.submit instanceof Function&&r.form.handlers.submit(e):(e.preventDefault(),e.stopPropagation())}))}},{key:"inputsTreatment",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__initialInputs,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=0;n<e.length;n++)if(e[n].element instanceof NodeList||e[n].element instanceof Array){var i=g({},e[n]),o=Array.from(e[n].element);e.splice(n,1);for(var a=0,s=o;a<s.length;a++){var u=s[a];i.element=u,r.push(g({},i))}}else r.push(e[n]);if(t)return r;this.__initialInputs=r}},{key:"emit",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this.emitter).emit.apply(t,[this.uid+" => "+e].concat(n))}},{key:"addListener",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this.emitter).addListener.apply(t,[this.uid+" => "+e].concat(n))}},{key:"getElement",value:function(e){return this.inputs.find((function(t){return t.element===e}))}},{key:"addInput",value:function(e){Array.from(e).length||(e=[e]);var t=this.inputsTreatment(e,!0);this.processInputValidation(t,!0)}},{key:"processInputValidation",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__initialInputs,t=0;t!==e.length;t++){var r=new b(e[t],this);r.isCorrect()?this.inputs.push(r):(r.destroy(t),r=void 0)}if(this.form.earlyInputInitiation){var n,i=E(this.inputs);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.isInit||o.init()}}catch(e){i.e(e)}finally{i.f()}}}},{key:"init",value:function(){if(this.__isInit&&this.inputs.length){var e,t=E(this.inputs);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}this.inputs=[]}try{if(this.validatorOptionsChecker(),this.inputsTreatment(),this.form.element.setAttribute(s.DATASET.VALID,"0"),this.processInputValidation(),!this.inputs.length)return void console.error(a.throw("All of inputs is incorrect for creating a ValidateElement! Please check your field in validateElementObject"));this.__isInit||this.form.element.addEventListener("submit",this.formSubmitHandler.bind(this),!0),this.__isInit=!0}catch(e){console.error(e)}}},{key:"validatorOptionsChecker",value:function(){var e;if(null===(e=this.form)||void 0===e||!e.element)throw a.throw("{ form.element } is undefined");if(!(this.form.element instanceof HTMLFormElement))throw a.throw("{ form.element } is not equal to type HTMLFormElement");if(!this.__initialInputs)throw a.throw("{ validateElements } is undefined!");if(!(this.__initialInputs instanceof Array))throw a.throw("{ validateElements } is not equal to type Array!");if(!this.__initialInputs.length)throw a.throw("{ validateElements } is empty!")}}])&&S(t.prototype,r),e}(),I=Object.create({});I.errorConstructor=function(e){var t="\n\t[".concat(e,"]:");return function(e){return new Error(t+" "+e+"\n")}};var _=Object.create({});function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}_.phone={},_.phone.ru=/^((\+7|7|8)+([0-9]){10})$((\+7|7|8)+([0-9]){10})/,_.email=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,_.number=/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/,_.creditCard={Mastercard:/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/,VisaMasterCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/,VisaCard:/^4[0-9]{12}(?:[0-9]{3})?$/,UnionPayCard:/^(62[0-9]{14,17})$/,JCBCard:/^(?:2131|1800|35\d{3})\d{11}$/,MaestroCard:/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,AmericanExpress:/^[34|37][0-9]{14}$/};var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"getMessage",value:function(e){return{INVOKE_ERROR:"Incorrect constructor call, for the class to work, call the [HTMLObserverValidation :: init] method",EMPTY_FORMS:"No form exists on the page",INVALID_FORM:"Initialized form",MUTATION_OBSERVER_IS_NOT_SUPPORTED:"Mutation observer not found or not supported!"}[e]||"INVALID MESSAGE TYPE"}}],null&&M(t.prototype,null),r&&M(t,r),e}(),P=Object.create({});function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}P.KEYWORDS={DEFINITION:"data-be-define",INITIALIZED:"data-be-initialized"};var k,V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"generateId",value:function(){for(var e=[],t=0;t<=15;t++)e[t]=t.toString(16);for(var r="",n=1;n<=36;n++)r+=9===n||14===n||19===n||24===n?"":15===n?4:20===n?e[4*Math.random()|8]:e[16*Math.random()|0];return r}},{key:"arrayEquals",value:function(t,r){if(!t&&!r)return!1;if(t.length!==r.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&r[n]instanceof Array){if(!e.arrayEquals(t[n],r[n]))return!1}else if(t[n]!==r[n])return!1;return!0}},{key:"objectEquals",value:function(t,r){for(var n in t){if(t.hasOwnProperty(n)!==r.hasOwnProperty(n))return!1;if(L(t[n])!==L(r[n]))return!1}for(var i in r){if(t.hasOwnProperty(i)!==r.hasOwnProperty(i))return!1;if(L(t[i])!==L(r[i]))return!1;if(t.hasOwnProperty(i))if(t[i]instanceof Array&&r[i]instanceof Array){if(!e.arrayEquals(t[i],r[i]))return!1}else if(t[i]instanceof Object&&r[i]instanceof Object){if(!e.objectEquals(t[i],r[i]))return!1}else if(t[i]!==r[i])return!1}return!0}}],null&&T(t.prototype,null),r&&T(t,r),e}(),R=Symbol("handlers");function x(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=C(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function C(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=!1,H=function(){function e(t){if(F(this,e),q(this,"forms",{}),q(this,"$form",void 0),q(this,"commonForms",document.forms),q(this,"MutationObserverInstance",void 0),q(this,"MutationObserverOptions",{childList:!0,attributes:!0,subtree:!0}),!$)throw new Error(j.getMessage("INVOKE_ERROR"));if(!t&&!document.forms.length)throw new Error(j.getMessage("EMPTY_FORMS"));if(t&&!this.checkDefinedForm(t))throw new Error(j.getMessage("INVALID_FORM"));this.$form=t,this.MutationObserverInstance=null}var t,r,n;return t=e,n=[{key:"init",value:function(t){return $=!0,new e(t).init()}}],(r=[{key:"checkDefinedForm",value:function(e){var t=e.getAttribute(P.KEYWORDS.DEFINITION),r=e.getAttribute(P.KEYWORDS.INITIALIZED);return null!==t&&!t.length&&!r}},{key:"getRawForms",value:function(){for(var e=[],t=0,r=Array.from(this.commonForms);t<r.length;t++){var n=r[t];this.checkDefinedForm(n)&&(e=[].concat(function(e){if(Array.isArray(e))return D(e)}(i=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||C(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n]))}var i;return e}},{key:"formsProcessing",value:function(){if(this.$form)this.localPreparation(this.$form);else{var e,t=x(this.getRawForms());try{for(t.s();!(e=t.n()).done;){var r=e.value;this.localPreparation(r)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"localPreparation",value:function(e){var t=V.generateId(),r={element:e},n=[];e.dataset.beDefine=t,e.dataset.beDefault&&(r.options.default="Y"===e.dataset.beDefault),e.dataset.beSubscribeOnInput&&(r.options.subscribeOnInput="Y"===e.dataset.subscribeOnInput);var i,o,a,s=x(e.querySelectorAll("input[data-be-field],textarea[data-be-field],select[data-be-field]"));try{for(s.s();!(i=s.n()).done;){var u=i.value;n.push({element:u,rules:{required:"Y"===u.dataset.beRequired||!1,rule:u.dataset.beRule?new RegExp(String.raw(k||(o=["",""],a=void 0,a||(a=o.slice(0)),k=Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(a)}}))),u.dataset.beRule)):null},onlyOnSubmit:"Y"===u.dataset.beOnlyOnSubmit||!1,message:{rule:{error:u.dataset.beMessageRuleError||"",success:u.dataset.beMessageRuleSuccess||""},required:{error:u.dataset.beMessageRequiredError||"",success:u.dataset.beMessageRequiredSuccess||""},border:"Y"===u.dataset.beBorder||!1}})}}catch(e){s.e(e)}finally{s.f()}var l=new U;l._id=t,l.$form=e,l.formArgs=r,l.fields=n,this.forms[t]=l}},{key:"mutationCallback$",value:function(){V.arrayEquals(this.commonForms,Array.from(document.forms))&&(this.commonForms=document.forms,this.formsProcessing())}},{key:"formsSetterHandler",value:function(){var e,t=x(Object.values(this.forms).filter((function(e){return e instanceof U&&!e.initValidation})));try{for(t.s();!(e=t.n()).done;){var r=e.value;r.ValidatorInstance=new w(r.formArgs,r.fields),r.ValidatorInstance.init(),r.initValidation=!0}}catch(e){t.e(e)}finally{t.f()}}},{key:"init",value:function(){var e;return this.forms=((e=this.forms)[R]=[],e.observe=function(e){this[R].push(e)},new Proxy(e,{set:function(e,t,r,n){var i=Reflect.set(e,t,r,n);return i&&e[R].forEach((function(e){return e(t,r)})),i}})),this.forms.observe(this.formsSetterHandler.bind(this)),this.formsProcessing(),window.MutationObserver?(this.MutationObserverInstance=new MutationObserver(this.mutationCallback$.bind(this)),this.$form||this.MutationObserverInstance.observe(document.body,this.MutationObserverOptions)):console.warn(j.getMessage("MUTATION_OBSERVER_IS_NOT_SUPPORTED")),this}}])&&N(t.prototype,r),n&&N(t,n),e}(),U=function e(){F(this,e),q(this,"_id",null),q(this,"$form",null),q(this,"formArgs",null),q(this,"fields",null),q(this,"initValidation",!1),q(this,"ValidatorInstance",null)};function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"getModules",value:function(){return{HTMLObserverValidation:H}}}],null&&z(t.prototype,null),r&&z(t,r),e}();function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Y=Object.create({}),K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"load",value:function(){Object.defineProperty(Y,"__constants",{value:s}),Object.defineProperty(Y,"__utils",{value:I}),Object.defineProperty(Y,"DefaultRules",{value:_}),Object.defineProperty(Y,"Create",{value:w}),Object.defineProperty(Y,"BEHelper",{value:V}),Object.defineProperty(Y,"modules",{value:B.getModules()})}},{key:"afterLoad",value:function(){Object.freeze(Y.__constants),Object.freeze(Y.__utils),window.BEFormValidator=Y}}],null&&G(t.prototype,null),r&&G(t,r),e}();K.load(),K.afterLoad()})();