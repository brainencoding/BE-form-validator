(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{N:()=>l});class e{static throw(t,e="BEFormValidator"){return l.__utils.errorConstructor(e)(t)}}const s=Object.create({});s.VERSION="0.0.1",s.PACKAGE_NAME_IN_FORM="__BEFV",s.VALIDATOR_TYPES={phone:"phone",email:"email",required:"required",length:"length"},s.DEFAUTL_VALUES={VALIDATOR:{element:void 0,options:{default:!1},subscriptions:{},handlers:{}},VALIDATION_ELEMENT:{onlyOnSubmit:!1,subscriptions:{valid:()=>{},invalid:()=>{}},handlers:{input:()=>{}}}},s.DATASET={VALID:"data-be-valid"},s.ERROR_MESSAGE_CLASS_NAME="be-error-message",s.SUCCESS_MESSAGE_CLASS_NAME="be-success-message";class i{text;input;opt;messageHTML;constructor(t,s,r={success:!1}){if(this.text=t,this.input=s,this.opt=r,!this.text.length)throw e.throw("{ text } for error is empty","InputMessage");if(!this.input)throw e.throw("{ input } is undefined","InputMessage");this.messageHTML=i.createWrapper(this.text,r.success)}static createWrapper(t,e){const i=document.createElement("span");return i.classList.add(e?s.SUCCESS_MESSAGE_CLASS_NAME:s.ERROR_MESSAGE_CLASS_NAME),i.textContent=t,i}append(){if(this.opt.noAdjacent){if(!this.opt.location)throw e.throw("{ messages.location } is undefined","InputMessage");this.opt.location.appendChild(this.messageHTML)}else this.input.insertAdjacentElement("afterend",this.messageHTML)}changeStatus(t,e=this.text){const i=t?s.SUCCESS_MESSAGE_CLASS_NAME:s.ERROR_MESSAGE_CLASS_NAME;this.messageHTML.className="",this.messageHTML.classList.add(i),this.opt.hasOwnProperty("border")&&this.opt.border&&this.input.classList.add(i+"-input"),this.messageHTML.innerText=e}remove(){this.messageHTML.remove()}}class r{opt;validator;isValid=!1;isInit=!1;messages;constructor(t,e){this.opt=t,this.validator=e,this.opt=Object.assign(this.opt,s.DEFAUTL_VALUES.VALIDATION_ELEMENT)}validate(){this.isValid=!1;const t=this.opt.element?.value,e=this.opt.rules,s=this.opt.message,n={location:s.location||void 0,noAdjacent:s.noAdjacent||void 0,border:s.border||!1};if(this.messages||(this.messages=new i(" ",this.opt.element,n)),e.hasOwnProperty("required")&&e.required){const e=!!t;if(s&&s.required&&(this.messages.remove(),this.messages.changeStatus(e,s?.required[e?"success":"error"]),this.messages.append()),!e)return void this.opt.subscriptions.invalid()}if(e.hasOwnProperty("rule")&&void 0!==e.rule){const i=e.rule;let n=!1;const o=e=>{switch(e.constructor){case RegExp:if(e.test(t.toString())){n=!0;break}break;case Function:if(e.call(this,this.opt.element,this.validator)){n=!0;break}break;default:r.Error("rules: { rule: ... } for this input is not valid. Please use valid RegExp like => /(.*)/g without quotes and dbl quotes or use function \n Element =>",this.opt.element.className)}};switch(i.constructor){case Array:{const t=i;t.length?t.map((t=>o(t))):r.Error("rule of array [] is empty.",this.opt.element.className);break}default:o(i)}if(this.messages.remove(),this.messages.changeStatus(n,n?n&&s.rule.success||"":s.rule.error||""),this.messages.append(),!n)return void this.opt.subscriptions.invalid()}this.opt.subscriptions.valid(this),this.isValid=!0}elementHandler(t){this.opt.handlers.input(t),this.validate()}init(){this.isInit||this.opt.onlyOnSubmit||this.opt.element.addEventListener("input",this.elementHandler.bind(this)),this.isInit=!0}isCorrect(){return this.opt.element?!!this.opt.hasOwnProperty("rules")||(r.Error("{ rules } is not defined!"),!1):(r.Error("{ element } is undefined!"),!1)}destroy(t){t&&r.Error("object are destroyed for element [index => "+t+"], element is undefined!"),this.isInit&&(this.opt.element.removeEventListener("input",this.elementHandler.bind(this)),this.messages&&this.messages.remove&&(this.messages.remove(),this.messages=void 0))}static Error(...t){const s=t.reduce(((t,e)=>t+e));return e.throw(s,"ValidateElement")}}class n{__initialInputs;inputs=[];form=s.DEFAUTL_VALUES.VALIDATOR;isFormValid=!1;__isInit=!1;constructor(t,e){this.__initialInputs=e,this.form=Object.assign(this.form,t),Object.defineProperty(this.form.element,s.PACKAGE_NAME_IN_FORM,{value:this})}formSubmitHandler(t){if(t.preventDefault(),this.inputs.length){this.isFormValid=!0;for(const t of this.inputs)t.isInit||t.init(),t.validate(),t.isValid||this.isFormValid&&(this.isFormValid=!1)}this.isFormValid?(this.form.element.setAttribute(s.DATASET.VALID,"1"),this.form.subscriptions?.valid&&this.form.subscriptions.valid(this),this.form.options?.default&&this.form.element.submit(),this.form.options.hasOwnProperty("submit")&&this.form.options.submit instanceof Function&&this.form.handlers.submit(t)):(this.form.element.setAttribute(s.DATASET.VALID,"0"),this.form.subscriptions?.invalid&&this.form.subscriptions.invalid(this))}init(){if(this.__isInit&&this.inputs.length){for(const t of this.inputs)t.destroy();this.inputs=[]}try{this.validatorOptionsChecker(),this.form.element.setAttribute(s.DATASET.VALID,"0");for(let t=0;t!==this.__initialInputs.length;t++){let e=new r(this.__initialInputs[t],this.form);e.isCorrect()?this.inputs.push(e):(e.destroy(t),e=void 0)}if(!this.inputs.length)return void e.throw("All of inputs is incorrect for creating a ValidateElement! Please check your field in validateElementObject");this.__isInit||this.form.element.addEventListener("submit",this.formSubmitHandler.bind(this),!0),this.__isInit=!0}catch(t){console.error(t)}}validatorOptionsChecker(){if(!this.form?.element)throw e.throw("{ form.element } is undefined");if(!(this.form.element instanceof HTMLFormElement))throw e.throw("{ form.element } is not equal to type HTMLFormElement");if(!this.__initialInputs)throw e.throw("{ validateElements } is undefined!");if(!(this.__initialInputs instanceof Array))throw e.throw("{ validateElements } is not equal to type Array!");if(!this.__initialInputs.length)throw e.throw("{ validateElements } is empty!")}}const o=Object.create({});o.errorConstructor=t=>{const e=`\n\t[${t}]:`;return t=>new Error(e+" "+t+"\n")};const a=Object.create({});a.phone={},a.phone.ru=/^((\+7|7|8)+([0-9]){10})$/gm,a.email=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gm,a.number=/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/,a.creditCard={Mastercard:/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/,VisaMasterCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/,VisaCard:/^4[0-9]{12}(?:[0-9]{3})?$/,UnionPayCard:/^(62[0-9]{14,17})$/,JCBCard:/^(?:2131|1800|35\d{3})\d{11}$/,MaestroCard:/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,AmericanExpress:/^[34|37][0-9]{14}$/};let l=Object.create({});class h{static load(){Object.defineProperty(l,"__constants",{value:s}),Object.defineProperty(l,"__utils",{value:o}),Object.defineProperty(l,"DefaultRules",{value:a}),Object.defineProperty(l,"Create",{value:n})}static afterLoad(){Object.freeze(l.__constants),Object.freeze(l.__utils),window.BEFormValidator=l}}h.load(),h.afterLoad()})();