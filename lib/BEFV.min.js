(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.d({},{N:()=>A});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n;return r=e,n=[{key:"throw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BEFormValidator";return A.__utils.errorConstructor(t)(e)}}],null&&t(r.prototype,null),n&&t(r,n),e}(),n=Object.create({});function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n.VERSION="1.3.8",n.PACKAGE_NAME_IN_FORM="__BEFV",n.VALIDATOR_TYPES={phone:"phone",email:"email",required:"required",length:"length"},n.DEFAUTL_VALUES={VALIDATOR:{element:void 0,options:{default:!1},subscriptions:{},handlers:{}},VALIDATION_ELEMENT:{onlyOnSubmit:!1,subscriptions:{valid:function(){},invalid:function(){}},handlers:{input:function(){}}}},n.DATASET={VALID:"data-be-valid"},n.ERROR_MESSAGE_CLASS_NAME="be-error-message",n.SUCCESS_MESSAGE_CLASS_NAME="be-success-message";var a=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{success:!1};if(i(this,e),s(this,"text",void 0),s(this,"input",void 0),s(this,"opt",void 0),s(this,"messageHTML",void 0),this.text=t,this.input=n,this.opt=o,!this.text.length)throw r.throw("{ text } for error is empty","InputMessage");if(!this.input)throw r.throw("{ input } is undefined","InputMessage");this.messageHTML=e.createWrapper(this.text,o.success)}var t,a,l;return t=e,l=[{key:"createWrapper",value:function(e,t){var r=document.createElement("span");return r.classList.add(t?n.SUCCESS_MESSAGE_CLASS_NAME:n.ERROR_MESSAGE_CLASS_NAME),r.textContent=e,r}}],(a=[{key:"append",value:function(){if(!this.opt.noSpan)if(this.opt.noAdjacent){if(!this.opt.location)throw r.throw("{ messages.location } is undefined","InputMessage");this.opt.location.appendChild(this.messageHTML)}else this.input.insertAdjacentElement("afterend",this.messageHTML)}},{key:"changeStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text;this.remove();var r=e?n.SUCCESS_MESSAGE_CLASS_NAME:n.ERROR_MESSAGE_CLASS_NAME;this.opt.noSpan||(this.messageHTML.className="",this.messageHTML.classList.add(r),this.messageHTML.innerText=t||""),this.opt.hasOwnProperty("border")&&this.opt.border&&this.input.classList.add(r+"-input"),this.append()}},{key:"remove",value:function(){this.opt.hasOwnProperty("border")&&this.opt.border&&(this.input.classList.remove(n.ERROR_MESSAGE_CLASS_NAME+"-input"),this.input.classList.remove(n.SUCCESS_MESSAGE_CLASS_NAME+"-input")),this.messageHTML.remove()}}])&&o(t.prototype,a),l&&o(t,l),e}();function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"opt",void 0),f(this,"validator",void 0),f(this,"isValid",!1),f(this,"isInit",!1),f(this,"messages",void 0),this.opt=t,this.validator=r;var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n.DEFAUTL_VALUES.VALIDATION_ELEMENT);if(this.opt=Object.assign(i,this.opt),"string"==typeof this.opt.element){var o=document.querySelector(this.opt.element);o?this.opt.element=o:(this.opt.element=void 0,console.error(e.Error("{ element } is undefined!")))}}var t,i,o;return t=e,o=[{key:"Error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return e+t}));return r.throw(i,"ValidateElement")}}],(i=[{key:"validate",value:function(){var t,r=this;this.isValid=!1;var n=!1,i=null===(t=this.opt.element)||void 0===t?void 0:t.value,o="checkbox"===this.opt.element.type,s=this.opt.element.checked,u=this.opt.rules,c=this.opt.message,f=!c.required&&!c.rule&&c.border,h={location:c.location||void 0,noAdjacent:c.noAdjacent||void 0,border:c.border||!1,noSpan:f};if(this.messages||(this.messages=new a(" ",this.opt.element,h)),u.hasOwnProperty("required")&&u.required){var d=o?s:!!i;if(this.messages.changeStatus(d,c&&c.required?null==c?void 0:c.required[d?"success":"error"]:""),!d)return void this.opt.subscriptions.invalid()}if(u.hasOwnProperty("rule")&&void 0!==u.rule){var p=u.rule;if(n=function t(n){switch(n.constructor){case RegExp:return n.test(i.toString());case Function:return n.call(r,r.opt.element,r.validator);case Array:var o=p,s=!1;if(o.length){var a,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}(o);try{for(u.s();!(a=u.n()).done;){var c=t(a.value);if(s=c,!c)break}}catch(e){u.e(e)}finally{u.f()}}else console.error(e.Error("rule of array [] is empty.",r.opt.element.className));return s;default:throw e.Error("rules: { rule: ... } for this input is not valid. Please use valid RegExp like => /(.*)/g without quotes and dbl quotes or use function \n Element =>",r.opt.element.className)}}(p),this.messages.changeStatus(n,n?n&&c.rule.success||"":c.rule.error||""),!n)return void this.opt.subscriptions.invalid()}this.opt.subscriptions.valid(this),this.isValid=!0}},{key:"elementHandler",value:function(e){this.opt.handlers.input(e),this.validate()}},{key:"init",value:function(){this.isInit||this.opt.onlyOnSubmit||this.opt.element.addEventListener("input",this.elementHandler.bind(this)),this.isInit=!0}},{key:"isCorrect",value:function(){return this.opt.element?!!this.opt.hasOwnProperty("rules")||(console.error(e.Error("{ rules } is not defined!")),!1):(console.error(e.Error("{ element } is undefined!")),!1)}},{key:"destroy",value:function(t){t&&e.Error("object are destroyed for element [index => "+t+"], element is undefined!"),this.isInit&&(this.opt.element.removeEventListener("input",this.elementHandler.bind(this)),this.messages&&this.messages.remove&&(this.messages.remove(),this.messages=void 0))}}])&&c(t.prototype,i),o&&c(t,o),e}();function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"__initialInputs",void 0),v(this,"inputs",[]),v(this,"form",n.DEFAUTL_VALUES.VALIDATOR),v(this,"isFormValid",!1),v(this,"__isInit",!1),this.__initialInputs=r,this.form=Object.assign(this.form,t),"string"==typeof this.form.element){var i=document.querySelector(this.form.element);if(!i)throw this.form.element=void 0,h.Error("{ element } is undefined!");this.form.element=i}Object.defineProperty(this.form.element,n.PACKAGE_NAME_IN_FORM,{value:this})}var t,i;return t=e,(i=[{key:"formSubmitHandler",value:function(e){if(e.preventDefault(),this.inputs.length){this.isFormValid=!0;var t,r=d(this.inputs);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isInit||i.init(),i.validate(),i.isValid||this.isFormValid&&(this.isFormValid=!1)}}catch(e){r.e(e)}finally{r.f()}}var o,s,a;this.isFormValid?(this.form.element.setAttribute(n.DATASET.VALID,"1"),null!==(o=this.form.subscriptions)&&void 0!==o&&o.valid&&this.form.subscriptions.valid(this),null!==(s=this.form.options)&&void 0!==s&&s.default&&this.form.element.submit(),this.form.handlers.hasOwnProperty("submit")&&this.form.handlers.submit instanceof Function&&this.form.handlers.submit(e)):(this.form.element.setAttribute(n.DATASET.VALID,"0"),null!==(a=this.form.subscriptions)&&void 0!==a&&a.invalid&&this.form.subscriptions.invalid(this))}},{key:"init",value:function(){if(this.__isInit&&this.inputs.length){var e,t=d(this.inputs);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}this.inputs=[]}try{this.validatorOptionsChecker(),this.form.element.setAttribute(n.DATASET.VALID,"0");for(var i=0;i!==this.__initialInputs.length;i++){var o=new h(this.__initialInputs[i],this.form);o.isCorrect()?this.inputs.push(o):(o.destroy(i),o=void 0)}if(!this.inputs.length)return void console.error(r.throw("All of inputs is incorrect for creating a ValidateElement! Please check your field in validateElementObject"));this.__isInit||this.form.element.addEventListener("submit",this.formSubmitHandler.bind(this),!0),this.__isInit=!0}catch(e){console.error(e)}}},{key:"validatorOptionsChecker",value:function(){var e;if(null===(e=this.form)||void 0===e||!e.element)throw r.throw("{ form.element } is undefined");if(!(this.form.element instanceof HTMLFormElement))throw r.throw("{ form.element } is not equal to type HTMLFormElement");if(!this.__initialInputs)throw r.throw("{ validateElements } is undefined!");if(!(this.__initialInputs instanceof Array))throw r.throw("{ validateElements } is not equal to type Array!");if(!this.__initialInputs.length)throw r.throw("{ validateElements } is empty!")}}])&&m(t.prototype,i),e}(),y=Object.create({});y.errorConstructor=function(e){var t="\n\t[".concat(e,"]:");return function(e){return new Error(t+" "+e+"\n")}};var E=Object.create({});function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}E.phone={},E.phone.ru=/^((\+7|7|8)+([0-9]){10})$/i,E.email=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,E.number=/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/,E.creditCard={Mastercard:/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/,VisaMasterCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/,VisaCard:/^4[0-9]{12}(?:[0-9]{3})?$/,UnionPayCard:/^(62[0-9]{14,17})$/,JCBCard:/^(?:2131|1800|35\d{3})\d{11}$/,MaestroCard:/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,AmericanExpress:/^[34|37][0-9]{14}$/};var A=Object.create({}),S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"load",value:function(){Object.defineProperty(A,"__constants",{value:n}),Object.defineProperty(A,"__utils",{value:y}),Object.defineProperty(A,"DefaultRules",{value:E}),Object.defineProperty(A,"Create",{value:b})}},{key:"afterLoad",value:function(){Object.freeze(A.__constants),Object.freeze(A.__utils),window.BEFormValidator=A}}],null&&g(t.prototype,null),r&&g(t,r),e}();S.load(),S.afterLoad()})();