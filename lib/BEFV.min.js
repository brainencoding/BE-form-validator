(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.d({},{N:()=>L});const r=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),i(this,"events",void 0),this.events=n}var r,o;return r=e,(o=[{key:"addListener",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]=n?[].concat(n):[]}},{key:"emit",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.events&&(null===(t=this.events[e])||void 0===t?void 0:t.length)&&this.events[e].forEach((function(e){i.length?i.forEach((function(t){e(t)})):e(void 0)}))}}])&&n(r.prototype,o),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"throw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BEFormValidator";return L.__utils.errorConstructor(t)(e)}}],null&&o(t.prototype,null),n&&o(t,n),e}(),a=Object.create({});function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.VERSION="1.4.2",a.PACKAGE_NAME_IN_FORM="__BEFV",a.VALIDATOR_TYPES={phone:"phone",email:"email",required:"required",length:"length"},a.DEFAUTL_VALUES={VALIDATOR:{element:void 0,options:{default:!1},subscriptions:{},handlers:{}},VALIDATION_ELEMENT:{onlyOnSubmit:!1,subscriptions:{valid:function(){},invalid:function(){}},handlers:{input:function(){}}}},a.DATASET={VALID:"data-be-valid"},a.ERROR_MESSAGE_CLASS_NAME="be-error-message",a.SUCCESS_MESSAGE_CLASS_NAME="be-success-message";var f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{success:!1};if(l(this,e),c(this,"text",void 0),c(this,"input",void 0),c(this,"opt",void 0),c(this,"messageHTML",void 0),this.text=t,this.input=n,this.opt=i,!this.text.length)throw s.throw("{ text } for error is empty","InputMessage");if(!this.input)throw s.throw("{ input } is undefined","InputMessage");this.messageHTML=e.createWrapper(this.text,i.success)}var t,n,i;return t=e,i=[{key:"createWrapper",value:function(e,t){var n=document.createElement("be-error");return n.classList.add(t?a.SUCCESS_MESSAGE_CLASS_NAME:a.ERROR_MESSAGE_CLASS_NAME),n.textContent=e,n}}],(n=[{key:"append",value:function(){if(!this.opt.noSpan)if(this.opt.noAdjacent){if(!this.opt.location)throw s.throw("{ messages.location } is undefined","InputMessage");this.opt.location.appendChild(this.messageHTML)}else this.input.insertAdjacentElement("afterend",this.messageHTML)}},{key:"changeStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text;this.remove();var n=e?a.SUCCESS_MESSAGE_CLASS_NAME:a.ERROR_MESSAGE_CLASS_NAME;this.opt.noSpan||(this.messageHTML.className="",this.messageHTML.classList.add(n),this.messageHTML.innerText=t||""),this.opt.hasOwnProperty("border")&&this.opt.border&&this.input.classList.add(n+"-input"),this.append()}},{key:"remove",value:function(){this.opt.hasOwnProperty("border")&&this.opt.border&&(this.input.classList.remove(a.ERROR_MESSAGE_CLASS_NAME+"-input"),this.input.classList.remove(a.SUCCESS_MESSAGE_CLASS_NAME+"-input")),this.messageHTML.remove()}}])&&u(t.prototype,n),i&&u(t,i),e}();function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"opt",void 0),p(this,"validator",void 0),p(this,"isValid",!1),p(this,"isInit",!1),p(this,"messages",void 0),p(this,"element",void 0),this.opt=t,this.validator=n;var i=v({},a.DEFAUTL_VALUES.VALIDATION_ELEMENT);if(this.opt=Object.assign(i,this.opt),this.element=this.opt.element,"string"==typeof this.element){var r=document.querySelector(this.element);r?this.element=r:(this.element=void 0,console.error(e.Error("{ element } is undefined!")))}}var t,n,i;return t=e,i=[{key:"Error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return e+t}));return s.throw(i,"ValidateElement")}}],(n=[{key:"validate",value:function(){var t,n=this;this.isValid=!1;var i,r=!1,o=!1,s=null===(t=this.element)||void 0===t?void 0:t.value,a="checkbox"===this.element.type,l=this.opt.rules,u=this.opt.message,c=!u.required&&!u.rule&&u.border,d={location:u.location||void 0,noAdjacent:u.noAdjacent||void 0,border:u.border||!1,noSpan:c};if("checked"in this.element&&(i=this.element.checked),this.messages||(this.messages=new f(" ",this.element,d)),l.hasOwnProperty("required")&&l.required){var m=a?!!i:!!s,p=m?"success":"error";if(this.messages.changeStatus(m,u&&u.required?(null==u?void 0:u.required.hasOwnProperty(p))&&u.required[p]:""),!m)return void this.opt.subscriptions.invalid()}var b={messagePreventDefault:function(){o=!0}};if(l.hasOwnProperty("rule")&&void 0!==l.rule){var y,E,g=l.rule;if(r=function t(i){switch(i.constructor){case RegExp:return i.test(s.toString());case Function:return i.call(v(v({},n),b),n.element,n.validator);case Array:var r=g,o=!1;if(r.length){var a,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(r);try{for(l.s();!(a=l.n()).done;){var u=t(a.value);if(o=u,!u)break}}catch(e){l.e(e)}finally{l.f()}}else console.error(e.Error("rule of array [] is empty.",n.element.className));return o;default:throw e.Error("rules: { rule: ... } for this input is not valid. Please use valid RegExp like => /(.*)/g without quotes and dbl quotes or use function \n Element =>",n.element.className)}}(g),o||this.messages.changeStatus(r,r?r&&(null==u||null===(E=u.rule)||void 0===E?void 0:E.success)||"":(null==u||null===(y=u.rule)||void 0===y?void 0:y.error)||""),!r)return void this.opt.subscriptions.invalid()}this.opt.subscriptions.valid(this),this.isValid=!0}},{key:"elementHandler",value:function(e){this.opt.handlers.input(e),this.validate(),this.validator.form.subscribeOnInput&&this.validator.emit("BEForm::checkInputValidation")}},{key:"init",value:function(){this.isInit||this.opt.onlyOnSubmit||this.element.addEventListener("input",this.elementHandler.bind(this)),this.isInit=!0}},{key:"isCorrect",value:function(){return this.element?!!this.opt.hasOwnProperty("rules")||(console.error(e.Error("{ rules } is not defined!")),!1):(console.error(e.Error("{ element } is undefined!")),!1)}},{key:"destroy",value:function(t){t&&e.Error("object are destroyed for element [index => "+t+"], element is undefined!"),this.isInit&&(this.element.removeEventListener("input",this.elementHandler.bind(this)),this.messages&&this.messages.remove&&(this.messages.remove(),this.messages=void 0))}}])&&m(t.prototype,n),i&&m(t,i),e}();function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"__initialInputs",void 0),A(this,"inputs",[]),A(this,"form",a.DEFAUTL_VALUES.VALIDATOR),A(this,"emitter",new r),A(this,"isFormValid",!1),A(this,"__isInit",!1),A(this,"uid",(Date.now().toString()+Math.floor(Math.random()*Date.now())).toString()),this.__initialInputs=n,this.form=t,"string"==typeof this.form.element){var i=document.querySelector(this.form.element);if(!i)throw this.form.element=void 0,b.Error("{ element } is undefined!");this.form.element=i}Object.defineProperty(this.form.element,a.PACKAGE_NAME_IN_FORM,{value:this}),this.form.hasOwnProperty("subscriptions")?("valid"in this.form.subscriptions&&this.form.subscriptions.valid instanceof Function||(this.form.subscriptions.valid=function(){}),"invalid"in this.form.subscriptions&&this.form.subscriptions.invalid instanceof Function||(this.form.subscriptions.invalid=function(){})):this.form.subscriptions={valid:function(){},invalid:function(){}},this.addListener("BEForm::isValidForm",function(){var e,t,n=a.ERROR_MESSAGE_CLASS_NAME+"input";this.isFormValid=!0,this.form.element.setAttribute(a.DATASET.VALID,"1"),null===(e=this.form.element.querySelectorAll("be-error"))||void 0===e||e.forEach((function(e){return e.remove()})),null===(t=this.form.element.querySelectorAll(n))||void 0===t||t.forEach((function(e){e.classList.contains(n)&&(e.classList.remove(n),e.classList.add(a.SUCCESS_MESSAGE_CLASS_NAME+"input"))})),this.form.subscriptions.valid(this)}.bind(this)),this.addListener("BEForm::isInvalidForm",function(){this.isFormValid=!1,this.form.element.setAttribute(a.DATASET.VALID,"0"),this.form.subscriptions.invalid(this)}.bind(this)),this.addListener("BEForm::checkInputValidation",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this.inputs.length){this.isFormValid=!0;var t,n=y(this.inputs);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.isInit||i.init(),i.validate(),i.isValid||this.isFormValid&&(this.isFormValid=!1)}}catch(e){n.e(e)}finally{n.f()}}this.emit("BEForm::"+(this.isFormValid?"isValidForm":"isInvalidForm")),e instanceof Function&&e()}.bind(this))}var t,n;return t=e,(n=[{key:"formSubmitHandler",value:function(e){var t=this;e.preventDefault(),this.emit("BEForm::checkInputValidation",(function(){var n;t.isFormValid&&(null!==(n=t.form.options)&&void 0!==n&&n.default&&t.form.element.submit(),t.form.handlers.hasOwnProperty("submit")&&t.form.handlers.submit instanceof Function&&t.form.handlers.submit(e))}))}},{key:"emit",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.emitter).emit.apply(t,[this.uid+" => "+e].concat(i))}},{key:"addListener",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.emitter).addListener.apply(t,[this.uid+" => "+e].concat(i))}},{key:"getElement",value:function(e){return this.inputs.find((function(t){return t.element===e}))}},{key:"init",value:function(){if(this.__isInit&&this.inputs.length){var e,t=y(this.inputs);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}this.inputs=[]}try{this.validatorOptionsChecker(),this.form.element.setAttribute(a.DATASET.VALID,"0");for(var n=0;n!==this.__initialInputs.length;n++){var i=new b(this.__initialInputs[n],this);i.isCorrect()?this.inputs.push(i):(i.destroy(n),i=void 0)}if(this.form.earlyInputInitiation){var r,o=y(this.inputs);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.isInit||l.init()}}catch(e){o.e(e)}finally{o.f()}}if(!this.inputs.length)return void console.error(s.throw("All of inputs is incorrect for creating a ValidateElement! Please check your field in validateElementObject"));this.__isInit||this.form.element.addEventListener("submit",this.formSubmitHandler.bind(this),!0),this.__isInit=!0}catch(e){console.error(e)}}},{key:"validatorOptionsChecker",value:function(){var e;if(null===(e=this.form)||void 0===e||!e.element)throw s.throw("{ form.element } is undefined");if(!(this.form.element instanceof HTMLFormElement))throw s.throw("{ form.element } is not equal to type HTMLFormElement");if(!this.__initialInputs)throw s.throw("{ validateElements } is undefined!");if(!(this.__initialInputs instanceof Array))throw s.throw("{ validateElements } is not equal to type Array!");if(!this.__initialInputs.length)throw s.throw("{ validateElements } is empty!")}}])&&g(t.prototype,n),e}(),w=Object.create({});w.errorConstructor=function(e){var t="\n\t[".concat(e,"]:");return function(e){return new Error(t+" "+e+"\n")}};var _=Object.create({});function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}_.phone={},_.phone.ru=/^((\+7|7|8)+([0-9]){10})$/i,_.email=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,_.number=/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/,_.creditCard={Mastercard:/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/,VisaMasterCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/,VisaCard:/^4[0-9]{12}(?:[0-9]{3})?$/,UnionPayCard:/^(62[0-9]{14,17})$/,JCBCard:/^(?:2131|1800|35\d{3})\d{11}$/,MaestroCard:/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,AmericanExpress:/^[34|37][0-9]{14}$/};var L=Object.create({}),x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"load",value:function(){Object.defineProperty(L,"__constants",{value:a}),Object.defineProperty(L,"__utils",{value:w}),Object.defineProperty(L,"DefaultRules",{value:_}),Object.defineProperty(L,"Create",{value:S})}},{key:"afterLoad",value:function(){Object.freeze(L.__constants),Object.freeze(L.__utils),window.BEFormValidator=L}}],null&&O(t.prototype,null),n&&O(t,n),e}();x.load(),x.afterLoad()})();